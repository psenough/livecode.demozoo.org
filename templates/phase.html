{% if phase['title'] %}
<h3>
  {{ phase['title'] }}
  {% if phase['vod'] %}
  <a class="btn btn-sm btn-info" target="_blank" href="{{phase['vod']}}">
    <i class="fas fa-video"></i>
  </a>
  {% endif %}
</h3>

{% endif %}

<div class="row">
  {% for entry in phase['entries'] %}
  <div class="col-12 col-md-6 col-xl-3">

    <div class="card border-secondary mb-4">
      {%if entry['preview_image'] %} 
      {# We check if there is a preview image provided. Works only if image is part of the project under ./media #}
      <img src="./media/{{entry['preview_image']}}" class="card-img-top"/>
      {% elif entry['shadertoy_url']%}
      {# Backup plan if shadertoy is available, there is a change a preview has been generated #}
      {% set stid = entry['shadertoy_url'].split('/') %}
      <img src="./media/{{stid[-1]}}.jpg" class="card-img-top"/>
      {% else %}
      {# No preview available so default image #}
      <img src="./assets/img/image-not-found.png" class="card-img-top"/>
      {% endif %}
      <div class="card-body bg-dark text-light">
        <h5 class="card-title">

          <span class="badge bg-light text-dark">
            {% if entry['rank'] %}
            {{entry['rank']}}
            {% else %}
            ?
            {% endif %}
          </span>

          <span>
            {% if entry['handle'] %}
            {{entry['handle']}}
            {% endif %}
          </span>

        </h5>
        <p class="card-text text-secondary">

          points <span class="badge bg-dark text-warning">
            {% if entry['points'] %}
            {{entry['points']}}
            {% else %}
            ?
            {% endif %}
          </span>

          <br>
          links
          {% if entry['vod'] %}
          <a class="ps-2 btn btn-sm btn-dark text-info" target="_blank" href="{{entry['vod']}}">
            <i class="fas fa-video"></i>
          </a>
          {% endif %}

          {% if entry['shadertoy_url']%}
          <a class="ps-2 btn btn-sm btn-dark text-info" target="_blank" href="{{entry['shadertoy_url']}}">
            <img height="12" width="auto" class="shadertoy_logo" src="./assets/img/shadertoy.png">
          </a>
          {% endif %}

          <br>
          shader file
          {% if entry['shader_file'] %}
          <a class="ps-2 bg-dark text-info" target="_blank" href="{{entry['shader_file']}}">
            <i class="fas fa-download"></i>
          </a>
          {% endif %}

          {% if entry['id'] %}
          <br>
          id <span class="badge bg-dark text-warning">{{entry['id']}}</span>
          {% endif %}

        </p>

      </div>
    </div>
  </div>

  {% endfor %}

</div>